<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test - Logo PDF Corregido</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container mt-4">
        <div class="card">
            <div class="card-header">
                <h4>Test - Logo PDF Corregido</h4>
            </div>
            <div class="card-body">
                <h5>üîß Problema del Logo en PDF</h5>
                <div class="alert alert-warning">
                    <strong>‚ùå Problema identificado:</strong> El logo no aparece en el PDF de remisiones
                </div>
                
                <h5>‚úÖ Soluci√≥n Implementada:</h5>
                <div class="alert alert-success">
                    <strong>‚úÖ Correcciones aplicadas:</strong>
                    <ul>
                        <li><strong>Ruta del logo:</strong> Cambiada a './assets/logoconsegur.png'</li>
                        <li><strong>Carga as√≠ncrona:</strong> Mejorada la funci√≥n de carga del logo</li>
                        <li><strong>Manejo de errores:</strong> Mejorado el manejo de errores de carga</li>
                        <li><strong>Posici√≥n:</strong> Mantenida en (20, 20) con tama√±o 50x25</li>
                    </ul>
                </div>
                
                <h5>üß™ Test de Carga del Logo:</h5>
                <div class="row">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h6>Test de Carga Directa</h6>
                            </div>
                            <div class="card-body text-center">
                                <img id="test-logo" src="./assets/logoconsegur.png" alt="Logo Test" style="max-width: 200px; height: auto;" onload="logoLoaded()" onerror="logoError()">
                                <div id="logo-status" class="mt-2"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h6>Informaci√≥n del Logo</h6>
                            </div>
                            <div class="card-body">
                                <div id="logo-info">
                                    <p><strong>Ruta:</strong> ./assets/logoconsegur.png</p>
                                    <p><strong>Estado:</strong> <span id="logo-state">Verificando...</span></p>
                                    <p><strong>Dimensiones:</strong> <span id="logo-dimensions">-</span></p>
                                    <p><strong>Formato:</strong> PNG</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <h5>üîç Pasos para Verificar:</h5>
                <ol>
                    <li><strong>Verificar carga del logo:</strong>
                        <ul>
                            <li>El logo debe aparecer en la imagen de prueba arriba</li>
                            <li>El estado debe mostrar "Cargado correctamente"</li>
                            <li>Las dimensiones deben mostrarse</li>
                        </ul>
                    </li>
                    <li><strong>Probar generaci√≥n de PDF:</strong>
                        <ul>
                            <li>Inicia sesi√≥n como administrador</li>
                            <li>Ve al m√≥dulo "Remisiones"</li>
                            <li>Genera una remisi√≥n o usa una existente</li>
                            <li>Haz clic en "Descargar PDF"</li>
                            <li>Abre el PDF y verifica que el logo aparezca en la esquina superior izquierda</li>
                        </ul>
                    </li>
                    <li><strong>Verificar consola:</strong>
                        <ul>
                            <li>Abre las herramientas de desarrollador (F12)</li>
                            <li>Ve a la pesta√±a "Console"</li>
                            <li>Busca mensajes como "Logo agregado exitosamente al PDF"</li>
                            <li>No debe haber errores relacionados con la carga del logo</li>
                        </ul>
                    </li>
                </ol>
                
                <h5>üõ†Ô∏è Comandos de Depuraci√≥n:</h5>
                <div class="alert alert-dark">
                    <strong>Comandos para verificar en la consola:</strong><br>
                    <code>// Verificar si el logo existe</code><br>
                    <code>fetch('./assets/logoconsegur.png').then(r => console.log('Logo existe:', r.ok))</code><br><br>
                    <code>// Verificar dimensiones del logo</code><br>
                    <code>const img = new Image(); img.onload = () => console.log('Dimensiones:', img.width, 'x', img.height); img.src = './assets/logoconsegur.png';</code><br><br>
                    <code>// Verificar ruta actual</code><br>
                    <code>console.log('Ruta actual:', window.location.href);</code>
                </div>
                
                <h5>üìã Checklist de Verificaci√≥n:</h5>
                <ul>
                    <li>‚úÖ ¬øEl logo se carga en la imagen de prueba?</li>
                    <li>‚úÖ ¬øEl estado muestra "Cargado correctamente"?</li>
                    <li>‚úÖ ¬øSe muestran las dimensiones del logo?</li>
                    <li>‚úÖ ¬øEl logo aparece en el PDF de remisiones?</li>
                    <li>‚úÖ ¬øEl logo est√° en la posici√≥n correcta (esquina superior izquierda)?</li>
                    <li>‚úÖ ¬øNo hay errores en la consola?</li>
                    <li>‚úÖ ¬øEl PDF se genera sin problemas?</li>
                </ul>
                
                <a href="index.html" class="btn btn-primary">Ir al Sistema</a>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function logoLoaded() {
            const img = document.getElementById('test-logo');
            const status = document.getElementById('logo-status');
            const state = document.getElementById('logo-state');
            const dimensions = document.getElementById('logo-dimensions');
            
            status.innerHTML = '<span class="badge bg-success">‚úÖ Cargado correctamente</span>';
            state.textContent = 'Cargado correctamente';
            dimensions.textContent = img.naturalWidth + ' x ' + img.naturalHeight;
            
            console.log('Logo cargado exitosamente:', img.naturalWidth, 'x', img.naturalHeight);
        }
        
        function logoError() {
            const status = document.getElementById('logo-status');
            const state = document.getElementById('logo-state');
            
            status.innerHTML = '<span class="badge bg-danger">‚ùå Error al cargar</span>';
            state.textContent = 'Error al cargar';
            
            console.error('Error al cargar el logo');
        }
        
        // Verificar autom√°ticamente al cargar la p√°gina
        window.onload = function() {
            const img = document.getElementById('test-logo');
            if (img.complete) {
                if (img.naturalHeight !== 0) {
                    logoLoaded();
                } else {
                    logoError();
                }
            }
        };
    </script>
</body>
</html>
